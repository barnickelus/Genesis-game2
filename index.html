// In player object
let player = {
  x: 0, y: 0, r: 15, mass: 10, tail: [],
  baseSpeed: 2.5, blink: 0, speedBoost: 0, heading: 0,
  colorEffect: { color: '#00e4b8', t: 0 }
};

// In loop, update color effect
if (player.colorEffect.t > 0) {
  player.colorEffect.t -= dt;
  if (player.colorEffect.t <= 0) player.colorEffect.color = '#00e4b8';
}

// In absorption logic, add color effect (example for food)
if (dist(player.x, player.y, f.x, f.y) < player.r + f.r) {
  player.mass += f.r;
  player.colorEffect = { color: f.frenzy ? f.col : '#ff0', t: 500 };
  food.splice(i, 1);
  burst(f.x, f.y, '#ff0');
  document.getElementById('eatSnd').play().catch(() => {});
}

// Similar updates for foes, Titans, Spectres, Reapers, pill, shield
// Foes
if (o.r < player.r && d < player.r) {
  player.mass += o.r * 2.5;
  player.colorEffect = { color: '#f00', t: 500 };
  // ...
}
// Titans
if (player.r > o.r && d < player.r) {
  player.mass += o.r * 5;
  player.colorEffect = { color: '#cc00ff', t: 500 };
  // ...
}
// Spectres
if (!ignore && d < player.r) {
  player.mass += s.r * 7;
  player.colorEffect = { color: '#ff39ff', t: 500 };
  // ...
}
// Reapers
if (!ignore && d < player.r) {
  player.mass += r.r;
  player.colorEffect = { color: '#ff8800', t: 500 };
  // ...
}
// Pill
if (pill.active && dist(player.x, player.y, pill.x, pill.y) < player.r + pill.r) {
  player.colorEffect = { color: '#00aaff', t: 500 };
  // ...
}
// Shield
if (shield.active && dist(player.x, player.y, shield.x, shield.y) < player.r + shield.r) {
  player.colorEffect = { color: '#ffd700', t: 500 };
  // ...
}