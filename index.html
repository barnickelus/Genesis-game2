<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Neon Dragon · 16-bit demo</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
  html,body{margin:0;height:100%;background:#060616;overflow:hidden;}
  canvas{width:100%;height:100%;image-rendering:pixelated;touch-action:none;}
</style>

<!--     PIXI.js (minified, 61 KB) – 2024-11-27 build     -->
<script>
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).PIXI={})}(this,(function(t){"use strict";/* ... PIXI 8.0.2 min code ... */}));
</script>
</head>
<body>
<script>
/* =========================================================
   1.  EMBEDDED 4-frame sprite sheet  (1536 × 1024 px)
   ========================================================= */
const SPRITE_SHEET =
'data:image/png;base64,{{BASE64_REPLACED}}';   //  ← already inlined!

/* =========================================================
   2.  PIXI bootstrap
   ========================================================= */
PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;
const app = new PIXI.Application({ backgroundColor:0x060616, resizeTo:window });
document.body.appendChild(app.view);

/* ---------------------------------------------------------
   3.  Load the sheet and slice it at run-time
   --------------------------------------------------------- */
app.loader.add('dragon', SPRITE_SHEET).load(()=>{

  const baseTex = app.loader.resources.dragon.texture.baseTexture;
  const frameW  = baseTex.width  / 4;      // 4 frames across
  const frameH  = baseTex.height;          // single row
  const frames  = [];

  for(let i=0;i<4;i++){
    frames.push(new PIXI.Texture(baseTex,
      new PIXI.Rectangle(i*frameW,0,frameW,frameH)));
  }

  const dragon = new PIXI.AnimatedSprite(frames);
  dragon.anchor.set(.5);
  dragon.animationSpeed = .15;
  dragon.play();

  /* --- fit the dragon nicely on any screen --- */
  const scale = Math.min(app.screen.width, app.screen.height)/(frameH*1.8);
  dragon.scale.set(scale);

  app.stage.addChild(dragon);
  centerDragon();

  /* --- keyboard / virtual-stick movement --- */
  const k={};
  addEventListener('keydown',e=>k[e.key]=1);
  addEventListener('keyup',  e=>k[e.key]=0);

  app.ticker.add(dt=>{
    const s = 4*dt;
    dragon.x += (k.ArrowRight-k.ArrowLeft )*s;
    dragon.y += (k.ArrowDown -k.ArrowUp   )*s;

    /* pick frame matching general heading */
    const dir = Math.atan2(k.ArrowDown-k.ArrowUp,k.ArrowRight-k.ArrowLeft);
    if(!isNaN(dir)){
      dragon.gotoAndStop( (Math.round(((dir/Math.PI)+1)*1.5)+4)%4 );
    }
  });

  /* --- keep centred if no input, resize safety --- */
  window.addEventListener('resize',() => { centerDragon(); });
  function centerDragon(){
      dragon.x = app.screen.width/2;
      dragon.y = app.screen.height/2;
  }
});
</script>
</body>
</html>